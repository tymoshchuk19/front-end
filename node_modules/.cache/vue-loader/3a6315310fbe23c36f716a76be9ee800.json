{"remainingRequest":"/workspace/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace/front-end/src/components/Chat.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/workspace/front-end/src/components/Chat.vue","mtime":1580360634753},{"path":"/workspace/front-end/node_modules/css-loader/dist/cjs.js","mtime":1580239220004},{"path":"/workspace/front-end/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1580239220548},{"path":"/workspace/front-end/node_modules/postcss-loader/src/index.js","mtime":1580239220271},{"path":"/workspace/front-end/node_modules/vuetify-loader/lib/loader.js","mtime":1580239220578},{"path":"/workspace/front-end/node_modules/cache-loader/dist/cjs.js","mtime":1580239219881},{"path":"/workspace/front-end/node_modules/vue-loader/lib/index.js","mtime":1580239220548}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmZ1bGwtaGVpZ2h0IHsKICBoZWlnaHQ6IDkxLjJ2aDsKICAvKiBoZWlnaHQ6IDk2LjJ2aDsgKi8KfQoKLmNoYXQtaGVpZ2h0IHsKICBoZWlnaHQ6IGF1dG87Cn0KCi5yb3VuZGVkLWNhcmQgewogIGJvcmRlci1yYWRpdXM6IDUwcHggIWltcG9ydGFudDsKfQoKLmNoYXQtYmFja2dyb3VuZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogYXF1YTsKfQoKLnJlbGF0aXZlIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5jaGF0LW92ZXJmbG93IHsKICBmbGV4OiAxOwogIG92ZXJmbG93LXk6IHNjcm9sbDsKfQoKaHRtbCB7CiAgb3ZlcmZsb3cteTogaGlkZGVuOwp9Cgpib2R5IHsKICBoZWlnaHQ6IDEwMHZoOwp9CgouY2hhdC1zdGlja3kgewogIHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50Owp9CgoubXNnZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1mbG93OiBjb2x1bW4gd3JhcDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwp9Cg=="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Chat.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container fluid fill-height class=\"ma-0 pa-0\">\n    <v-layout text-center wrap>\n      <v-row no-gutters>\n        <v-col cols=\"2\">\n          <List\n            :userData=\"userData\"\n            :conversations=\"conversations\"\n            v-on:select-conversation=\"currentConversation = $event\"\n          />\n        </v-col>\n        <v-col cols=\"7\" class=\"grey lighten-2 relative full-height\">\n          <div class=\"msger\">\n            <div id=\"chat-col\" class=\"chat-overflow\">\n              <Logs :messages=\"messages\" />\n            </div>\n            <v-footer color>\n              <v-btn class=\"ml-3\" icon color=\"primary\">\n                <v-icon class=\"mr-3\" size=\"37\" color=\"primary\">mdi-plus-circle</v-icon>\n              </v-btn>\n              <v-text-field\n                v-model=\"message\"\n                rounded\n                outlined\n                dense\n                hide-details\n                placeholder=\"Escreve uma mensagem\"\n                v-on:keyup.enter=\"postMessage(message)\"\n              ></v-text-field>\n              <v-btn class=\"ml-3\" icon color=\"primary\" v-on:click=\"postMessage(message)\">\n                <v-icon size=\"37\">mdi-send-circle</v-icon>\n              </v-btn>\n            </v-footer>\n          </div>\n        </v-col>\n        <v-col cols=\"3\">\n          <Profile />\n        </v-col>\n      </v-row>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\n/* eslint-disable no-console */\nimport { API } from \"../../config/config\";\n\nimport axios from \"axios\";\n\nimport Logs from \"./Logs\";\nimport List from \"./List\";\nimport Profile from \"./Profile\";\nexport default {\n  name: \"Chat\",\n\n  components: {\n    Logs,\n    List,\n    Profile\n  },\n  mounted() {\n    this.getConversations();\n    this.getMessages();\n    this.getMessagesTimer();\n    this.getUserData();\n  },\n  data() {\n    return {\n      conversations: null,\n      currentConversation: null,\n      messages: null,\n      message: null,\n      userData: null\n    };\n  },\n  methods: {\n    scrollEnd() {\n      console.log(\"scrolled\");\n\n      let container = document.getElementById(\"chat-col\");\n      let scrollHeight = container.scrollHeight;\n      container.scrollTop = scrollHeight;\n    },\n    getConversations() {\n      axios.get(`${API}conversations`).then(({ data }) => {\n        this.conversations = data;\n        this.currentConversation = data[0]._id;\n      });\n    },\n    getMessages() {\n      if (this.currentConversation) {\n        axios\n          .get(`${API}conversations/${this.currentConversation}/messages`)\n          .then(({ data }) => {\n            this.messages = data;\n            // this.scrollEnd();\n          });\n      }\n    },\n    postMessage(message) {\n      if (message) {\n        axios\n          .post(`${API}conversations/${this.currentConversation}/messages`, {\n            content: message,\n            type: \"text\"\n          })\n          .then(this.getMessages)\n          .then(() => this.scrollEnd());\n        this.message = \"\";\n      }\n    },\n    getMessagesTimer() {\n      setInterval(() => {\n        this.getMessages();\n      }, 3000);\n    },\n    getUserData() {\n      axios.get(`${API}users/${this.user}`).then(({ data }) => {\n        this.userData = data;\n      });\n    }\n  }\n};\n</script>\n\n<style >\n.full-height {\n  height: 91.2vh;\n  /* height: 96.2vh; */\n}\n\n.chat-height {\n  height: auto;\n}\n\n.rounded-card {\n  border-radius: 50px !important;\n}\n\n.chat-background {\n  background-color: aqua;\n}\n\n.relative {\n  position: relative;\n}\n\n.chat-overflow {\n  flex: 1;\n  overflow-y: scroll;\n}\n\nhtml {\n  overflow-y: hidden;\n}\n\nbody {\n  height: 100vh;\n}\n\n.chat-sticky {\n  position: fixed !important;\n}\n\n.msger {\n  display: flex;\n  flex-flow: column wrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n}\n</style>"]}]}