{"remainingRequest":"/home/canel/Code/PRI/front-end/node_modules/babel-loader/lib/index.js!/home/canel/Code/PRI/front-end/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/home/canel/Code/PRI/front-end/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/canel/Code/PRI/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/canel/Code/PRI/front-end/src/components/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/canel/Code/PRI/front-end/src/components/Chat.vue","mtime":1580417697896},{"path":"/home/canel/Code/PRI/front-end/node_modules/cache-loader/dist/cjs.js","mtime":1580417697002},{"path":"/home/canel/Code/PRI/front-end/node_modules/babel-loader/lib/index.js","mtime":1580417696982},{"path":"/home/canel/Code/PRI/front-end/node_modules/vuetify-loader/lib/loader.js","mtime":1580417697716},{"path":"/home/canel/Code/PRI/front-end/node_modules/cache-loader/dist/cjs.js","mtime":1580417697002},{"path":"/home/canel/Code/PRI/front-end/node_modules/vue-loader/lib/index.js","mtime":1580417697686}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KaW1wb3J0IHsgQVBJIH0gZnJvbSAiLi4vLi4vY29uZmlnL2NvbmZpZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBMb2dzIGZyb20gIi4vTG9ncyI7CmltcG9ydCBMaXN0IGZyb20gIi4vTGlzdCI7CmltcG9ydCBQcm9maWxlIGZyb20gIi4vUHJvZmlsZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2hhdCIsCiAgY29tcG9uZW50czogewogICAgTG9nczogTG9ncywKICAgIExpc3Q6IExpc3QsCiAgICBQcm9maWxlOiBQcm9maWxlCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDb252ZXJzYXRpb25zKCk7CiAgICB0aGlzLmdldE1lc3NhZ2VzKCk7CiAgICB0aGlzLmdldE1lc3NhZ2VzVGltZXIoKTsKICAgIHRoaXMuZ2V0VXNlckRhdGEoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb252ZXJzYXRpb25zOiBudWxsLAogICAgICBjdXJyZW50Q29udmVyc2F0aW9uOiBudWxsLAogICAgICBtZXNzYWdlczogbnVsbCwKICAgICAgbWVzc2FnZTogbnVsbCwKICAgICAgdXNlckRhdGE6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDb252ZXJzYXRpb25zOiBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCIiLmNvbmNhdChBUEksICJjb252ZXJzYXRpb25zIikpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICBfdGhpcy5jb252ZXJzYXRpb25zID0gZGF0YTsKICAgICAgICBfdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uID0gZGF0YVswXS5faWQ7CiAgICAgIH0pOwogICAgfSwKICAgIGdldE1lc3NhZ2VzOiBmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5jdXJyZW50Q29udmVyc2F0aW9uKSB7CiAgICAgICAgYXhpb3MuZ2V0KCIiLmNvbmNhdChBUEksICJjb252ZXJzYXRpb25zLyIpLmNvbmNhdCh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb24sICIvbWVzc2FnZXMiKSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKICAgICAgICAgIF90aGlzMi5tZXNzYWdlcyA9IGRhdGE7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwb3N0TWVzc2FnZTogZnVuY3Rpb24gcG9zdE1lc3NhZ2UobWVzc2FnZSkgewogICAgICBpZiAobWVzc2FnZSkgewogICAgICAgIGF4aW9zLnBvc3QoIiIuY29uY2F0KEFQSSwgImNvbnZlcnNhdGlvbnMvIikuY29uY2F0KHRoaXMuY3VycmVudENvbnZlcnNhdGlvbiwgIi9tZXNzYWdlcyIpLCB7CiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLAogICAgICAgICAgdHlwZTogInRleHQiCiAgICAgICAgfSkudGhlbih0aGlzLmdldE1lc3NhZ2VzKTsKICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGdldE1lc3NhZ2VzVGltZXI6IGZ1bmN0aW9uIGdldE1lc3NhZ2VzVGltZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5nZXRNZXNzYWdlcygpOwogICAgICB9LCAzMDAwKTsKICAgIH0sCiAgICBnZXRVc2VyRGF0YTogZnVuY3Rpb24gZ2V0VXNlckRhdGEoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCIiLmNvbmNhdChBUEksICJ1c2Vycy8iKS5jb25jYXQodGhpcy51c2VyKSkudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYzLmRhdGE7CiAgICAgICAgX3RoaXM0LnVzZXJEYXRhID0gZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA,SAAA,GAAA,QAAA,qBAAA;AAEA,OAAA,KAAA,MAAA,OAAA;AAEA,OAAA,IAAA,MAAA,QAAA;AACA,OAAA,IAAA,MAAA,QAAA;AACA,OAAA,OAAA,MAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,IAAA,EAAA,IAFA;AAGA,IAAA,OAAA,EAAA;AAHA,GAHA;AAQA,EAAA,OARA,qBAQA;AACA,SAAA,gBAAA;AACA,SAAA,WAAA;AACA,SAAA,gBAAA;AACA,SAAA,WAAA;AACA,GAbA;AAcA,EAAA,IAdA,kBAcA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,IADA;AAEA,MAAA,mBAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA,IAHA;AAIA,MAAA,OAAA,EAAA,IAJA;AAKA,MAAA,QAAA,EAAA;AALA,KAAA;AAOA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,WAAA,GAAA,oBAAA,IAAA,CAAA,gBAAA;AAAA,YAAA,IAAA,QAAA,IAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,mBAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA;AACA,OAHA;AAIA,KANA;AAOA,IAAA,WAPA,yBAOA;AAAA;;AACA,UAAA,KAAA,mBAAA,EAAA;AACA,QAAA,KAAA,CACA,GADA,WACA,GADA,2BACA,KAAA,mBADA,gBAEA,IAFA,CAEA,iBAAA;AAAA,cAAA,IAAA,SAAA,IAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA,SAJA;AAKA;AACA,KAfA;AAgBA,IAAA,WAhBA,uBAgBA,OAhBA,EAgBA;AACA,UAAA,OAAA,EAAA;AACA,QAAA,KAAA,CACA,IADA,WACA,GADA,2BACA,KAAA,mBADA,gBACA;AACA,UAAA,OAAA,EAAA,OADA;AAEA,UAAA,IAAA,EAAA;AAFA,SADA,EAKA,IALA,CAKA,KAAA,WALA;AAMA,aAAA,OAAA,GAAA,EAAA;AACA;AACA,KA1BA;AA2BA,IAAA,gBA3BA,8BA2BA;AAAA;;AACA,MAAA,WAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,WAAA;AACA,OAFA,EAEA,IAFA,CAAA;AAGA,KA/BA;AAgCA,IAAA,WAhCA,yBAgCA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,WAAA,GAAA,mBAAA,KAAA,IAAA,GAAA,IAAA,CAAA,iBAAA;AAAA,YAAA,IAAA,SAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA,OAFA;AAGA;AApCA;AAvBA,CAAA","sourcesContent":["<template>\n  <v-container fluid fill-height class=\"ma-0 pa-0\">\n    <v-layout text-center wrap>\n      <v-row no-gutters>\n        <v-col cols=\"2\">\n          <List\n            :userData=\"userData\"\n            :conversations=\"conversations\"\n            v-on:select-conversation=\"currentConversation = $event\"\n            v-on:new-conversation=\"getConversations\"\n          />\n        </v-col>\n        <v-col cols=\"7\" class=\"grey lighten-2 relative full-height\">\n          <div class=\"msger\">\n            <div id=\"chat-col\" class=\"chat-overflow\" v-chat-scroll>\n              <Logs :messages=\"messages\" />\n            </div>\n            <v-footer color>\n              <v-btn class=\"ml-3\" icon color=\"primary\">\n                <v-icon class=\"mr-3\" size=\"37\" color=\"primary\">mdi-plus-circle</v-icon>\n              </v-btn>\n              <v-text-field\n                v-model=\"message\"\n                rounded\n                outlined\n                dense\n                hide-details\n                placeholder=\"Escreve uma mensagem\"\n                v-on:keyup.enter=\"postMessage(message)\"\n              ></v-text-field>\n              <v-btn class=\"ml-3\" icon color=\"primary\" v-on:click=\"postMessage(message)\">\n                <v-icon size=\"37\">mdi-send-circle</v-icon>\n              </v-btn>\n            </v-footer>\n          </div>\n        </v-col>\n        <v-col cols=\"3\">\n          <Profile />\n        </v-col>\n      </v-row>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\n/* eslint-disable no-console */\nimport { API } from \"../../config/config\";\n\nimport axios from \"axios\";\n\nimport Logs from \"./Logs\";\nimport List from \"./List\";\nimport Profile from \"./Profile\";\nexport default {\n  name: \"Chat\",\n\n  components: {\n    Logs,\n    List,\n    Profile\n  },\n  mounted() {\n    this.getConversations();\n    this.getMessages();\n    this.getMessagesTimer();\n    this.getUserData();\n  },\n  data() {\n    return {\n      conversations: null,\n      currentConversation: null,\n      messages: null,\n      message: null,\n      userData: null\n    };\n  },\n  methods: {\n    getConversations() {\n      axios.get(`${API}conversations`).then(({ data }) => {\n        this.conversations = data;\n        this.currentConversation = data[0]._id;\n      });\n    },\n    getMessages() {\n      if (this.currentConversation) {\n        axios\n          .get(`${API}conversations/${this.currentConversation}/messages`)\n          .then(({ data }) => {\n            this.messages = data;\n          });\n      }\n    },\n    postMessage(message) {\n      if (message) {\n        axios\n          .post(`${API}conversations/${this.currentConversation}/messages`, {\n            content: message,\n            type: \"text\"\n          })\n          .then(this.getMessages);\n        this.message = \"\";\n      }\n    },\n    getMessagesTimer() {\n      setInterval(() => {\n        this.getMessages();\n      }, 3000);\n    },\n    getUserData() {\n      axios.get(`${API}users/${this.user}`).then(({ data }) => {\n        this.userData = data;\n      });\n    }\n  }\n};\n</script>\n\n<style>\n.full-height {\n  height: 91.2vh;\n  /* height: 96.2vh; */\n}\n\n.chat-height {\n  height: auto;\n}\n\n.rounded-card {\n  border-radius: 50px !important;\n}\n\n.chat-background {\n  background-color: aqua;\n}\n\n.relative {\n  position: relative;\n}\n\n.chat-overflow {\n  flex: 1;\n  overflow-y: scroll;\n}\n\n/* html {\n  overflow-y: hidden;\n} */\n\nbody {\n  height: 100vh;\n}\n\n.chat-sticky {\n  position: fixed !important;\n}\n\n.msger {\n  display: flex;\n  flex-flow: column wrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"sourceRoot":"src/components"}]}